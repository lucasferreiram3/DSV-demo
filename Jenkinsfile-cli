pipeline {
    agent any
    stages {
        stage("Read DSV secrets") {
            steps {
                withCredentials([usernamePassword(credentialsId: 'dsv-jenkins', passwordVariable: 'PASS', usernameVariable: 'USER')]) {
                   sh 'ls -l'
                   sh './dsv auth >> /dev/null'
                   //sh './dsv secret read secrets:demo2 --filter ".attributes.password"'    
                   def DSV_SECRET_PASS = dsv secret read secrets:demo2 --filter ".attributes.password"
                   sh 'echo "$DSV_SECRET_PASS"'
                }  
            }
        }
    }
}