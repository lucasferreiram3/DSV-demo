pipeline {
    agent any
    stages {
        stage("Read DSV secrets") {
            steps {
                withCredentials([usernamePassword(credentialsId: 'dsv-jenkins', passwordVariable: 'PASS', usernameVariable: 'USER')]) {
                   sh 'ls -l'
                   sh 'dsv auth --auth-username ${USER} --auth-password ${PASS} >> /dev/null'
                   sh 'dsv secret search --auth-username ${USER} --auth-password ${PASS}'    
                }  
            }
        }
    }
}